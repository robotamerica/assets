<!doctype html>
<html lang="en">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>office topology</title>

<style>
:root{--bg:#050e0a;--fg:#caffdc;--b:rgba(160,255,200,.18);--bh:rgba(160,255,200,.28)}
*{box-sizing:border-box}
body{margin:0;background:var(--bg);color:var(--fg);font-family:ui-monospace,menlo,monaco,consolas,monospace}
.wrap{min-height:100svh;display:flex;justify-content:center;align-items:stretch;padding:12px}
.crt{position:relative;width:min(980px,100%);margin:auto;border-radius:18px;border:1px solid var(--b);background:radial-gradient(120% 100% at 50% 10%,rgba(60,255,160,.12),transparent 60%),var(--bg);box-shadow:0 18px 50px rgba(0,0,0,.6);overflow:hidden}
.scan{position:absolute;inset:0;background:linear-gradient(to bottom,rgba(0,0,0,0) 0,rgba(0,0,0,0) 50%,rgba(0,0,0,.22) 50%,rgba(0,0,0,.22) 100%);background-size:100% 4px;mix-blend-mode:multiply;pointer-events:none;opacity:.5}
.inner{display:flex;flex-direction:column;gap:12px;padding:14px}
.hud{display:flex;flex-wrap:wrap;gap:8px;align-items:center;justify-content:space-between;border-bottom:1px solid rgba(160,255,200,.12);padding-bottom:10px}
.tag{opacity:.6;font-size:clamp(.78rem,.7rem + .3vw,.92rem)}
.out{white-space:pre-wrap;word-break:break-word;line-height:1.25rem;font-size:clamp(.9rem,.78rem + .35vw,1rem);text-shadow:0 0 10px rgba(80,255,160,.2);min-height:clamp(340px,48svh,640px);overflow:auto;padding:10px 2px;border-radius:12px}
.bar{display:flex;flex-wrap:wrap;gap:8px}
.btn{padding:7px 10px;border-radius:999px;border:1px solid var(--b);background:rgba(255,255,255,.03);color:var(--fg);font-size:.82rem;cursor:pointer;user-select:none}
.btn:hover{background:rgba(160,255,200,.08);border-color:var(--bh)}
.btn.blue{border-color:rgba(90,180,255,.32)}
.btn.yellow{border-color:rgba(255,220,90,.32)}
.btn.red{border-color:rgba(255,110,140,.32)}
.btn.green{border-color:rgba(90,255,170,.32)}
.btn.teal{border-color:rgba(90,255,255,.32)}
.tap{opacity:.5;font-size:.78rem}
.cursor{display:inline-block;transform:translateY(1px);animation:b 1s steps(2,start) infinite}
@keyframes b{to{opacity:0}}
@media (prefers-reduced-motion: reduce){.cursor{animation:none}}
</style>

<div class="wrap">
  <div class="crt" id="crt" role="region" aria-label="office topography terminal">
    <div class="scan"></div>
    <div class="inner">
      <div class="hud">
        <div class="tag">worker@theoffice:$ office topology terminal <span class="cursor">▮</span></div>
        <div class="tap">tap screen to summon a new topology</div>
      </div>

      <div class="out" id="o" aria-live="polite"></div>

      <div class="bar">
        <button class="btn red" data-office="red">operations</button>
        <button class="btn blue" data-office="blue">accounting</button>
        <button class="btn teal" data-office="teal">human resources</button>
        <button class="btn yellow" data-office="yellow">marketing</button>
        <button class="btn green" data-office="green">technology</button>
        <button class="btn" data-roll="1">shuffle</button>
        <button class="btn" data-clear="1">clear</button>
      </div>
    </div>
  </div>
</div>

<script>
const o=document.getElementById("o"),crt=document.getElementById("crt")

const palette={
red:{name:"operations",hex:"#ff6e8c"},
blue:{name:"accounting",hex:"#5ab4ff"},
teal:{name:"human resources",hex:"#5affff"},
yellow:{name:"marketing",hex:"#ffdc5a"},
green:{name:"technology",hex:"#5affaa"}
}

const offices={
red:[
"department: operations",
"pod: a cluster that became a single-floor building",
"myth: powered by the hum of deadlines in the soil",
"totem: the incident (a siren that sings in numbered headings)",
"duty: keep systems stitched together with triage and ritual",
"rule: downtime is a superstition"
],
blue:[
"department: accounting",
"pod: a cluster that became a single-floor building",
"myth: built from recycled meeting minutes and linted receipts",
"totem: the ledger (it counts fog and calls it profit)",
"duty: translate the forest into numbers that can be filed",
"rule: if it cannot be reconciled, it must be renamed"
],
teal:[
"department: human resources",
"pod: a cluster that became a single-floor building",
"myth: staffed by one manager who knows exactly what they are doing: hiring",
"totem: the application (a leaf that wants your name)",
"duty: recruit workers for a purpose the forest has not disclosed",
"rule: you are an exciting opportunity promising a promising future"
],
yellow:[
"department: marketing",
"pod: a cluster that became a single-floor building",
"myth: runs on applause and espresso vapor",
"totem: the slogan engine (it prints weather into desire)",
"duty: sell the office to itself until the walls agree",
"rule: if it is not loud, it is not real"
],
green:[
"department: technology",
"pod: a cluster that became a single-floor building",
"myth: grew from a single seed of unfinished code",
"totem: the field note (it rewrites you as you write it)",
"duty: compile whispers, refactor sky, keep the mossy server breathing",
"rule: nothing ships; everything grows"
]
}

const topos=[
{g:"▦",n:"cubicle grid",d:"an obedient lattice; feelings are rounded down"},
{g:"◎",n:"ring district",d:"hierarchy as orbit; the center is always absent"},
{g:"⟁",n:"command delta",d:"decisions fall like rain and never return"},
{g:"╫",n:"corridor spine",d:"a hallway that believes it is destiny"},
{g:"⟡",n:"mycelial mesh",d:"routes appear when walked; rumor becomes infrastructure"},
{g:"◈",n:"floating pods",d:"teams as archipelagos; alignment is the sea"},
{g:"⌂",n:"vaulted records room",d:"archive as weather; policies as ghosts"}
]

const buildings=[
{c:"red",k:"o",name:"operations building",tag:"incident engine"},
{c:"blue",k:"a",name:"accounting building",tag:"fog ledger annex"},
{c:"teal",k:"h",name:"human resources building",tag:"hiring greenhouse"},
{c:"yellow",k:"m",name:"marketing building",tag:"pipeline theatre"},
{c:"green",k:"t",name:"technology building",tag:"moss server room"}
]

const buildingDefs={
o:[
"building: operations",
"structure: single-floor shell grown around a pod",
"rooms: dispatch nook, triage altar, cable pantry",
"doors: open when something is already on fire",
"inside: corridor spine ╫ that believes it is destiny"
],
a:[
"building: accounting",
"structure: single-floor shell grown around a pod",
"rooms: reconciliation bay, receipt kiln, quiet audit",
"doors: open only after the numbers agree to exist",
"inside: cubicle grid ▦ that loops back to itself"
],
h:[
"building: human resources",
"structure: single-floor shell grown around a pod",
"rooms: waiting bench, form orchard, interview mirror",
"doors: open when you say yes to the office before you understand it",
"inside: ring district ◎ where hiring is the only certain ritual"
],
m:[
"building: marketing",
"structure: single-floor shell grown around a pod",
"rooms: poster wall, slogan press, applause duct",
"doors: open when attention hits threshold",
"inside: floating pods ◈ where alignment is theater"
],
t:[
"building: technology",
"structure: single-floor shell grown around a pod",
"rooms: moss rack, compile pit, patch garden",
"doors: open sideways, like a secret",
"inside: mycelial mesh ⟡ that grows paths as you walk"
]
}

const forestmap=[
"        ⬡⬡⬡⬡⬡⬡⬡⬡⬡⬡⬡",
"     ⬡⬡⬡   ◎◎◎◎◎   ⬡⬡⬡",
"   ⬡⬡    ⟡──◉──⟡    ⬡⬡",
"  ⬡     o──⌂──m     ⬡",
"  ⬡     │  ║  │     ⬡",
"   ⬡⬡   a──╫──t   ⬡⬡",
"     ⬡⬡⬡   ⟡h⟡   ⬡⬡⬡",
"        ⬡⬡⬡⬡⬡⬡⬡⬡⬡"
]

let typing=false
let q=[]
let seed=0

function pick(a){return a[Math.random()*a.length|0]}
function line(s=""){o.textContent+=s+"\n";o.scrollTop=o.scrollHeight}
function reset(){o.textContent="";banner()}
function banner(){
line("office topography")
line("five pods in a forest of nodes")
line("each pod grew a single-floor building")
line("")
line("colour codes (department -> hex)")
line("  operations      "+palette.red.hex)
line("  accounting      "+palette.blue.hex)
line("  human resources "+palette.teal.hex)
line("  marketing       "+palette.yellow.hex)
line("  technology      "+palette.green.hex)
line("")
line("tap buttons to summon dossiers + building plans")
line("")
}

function enqueue(text){
q.push(text)
if(!typing)drain()
}
function drain(){
if(!q.length){typing=false;return}
typing=true
const text=q.shift()
typeblock(text,()=>drain())
}
function typeblock(text,done){
let i=0
const startLen=o.textContent.length
const tick=()=>{
if(i===0 && startLen>0 && !o.textContent.endsWith("\n")) o.textContent+="\n"
if(i<text.length){
o.textContent+=text[i]
i++
o.scrollTop=o.scrollHeight
setTimeout(tick,12+((seed++%7)*3))
}else{
o.textContent+="\n"
o.scrollTop=o.scrollHeight
done()
}
}
tick()
}

function summon(color){
const myth=offices[color]||[]
const topo=pick(topos)
const b=buildings.find(x=>x.c===color)
const bd=buildingDefs[b.k]||[]
enqueue("")
enqueue("worker@theoffice:$ branch "+palette[color].name)
enqueue("")
enqueue("colour "+palette[color].hex)
enqueue("")
enqueue("pod dossier")
myth.forEach(s=>enqueue("  "+s))
enqueue("")
enqueue("building dossier")
bd.forEach(s=>enqueue("  "+s))
enqueue("")
enqueue("topology "+topo.g+" "+topo.n)
enqueue("  "+topo.d)
enqueue("")
enqueue("forest map seed")
forestmap.forEach(l=>enqueue("  "+l))
enqueue("")
enqueue("map key")
enqueue("  o operations building")
enqueue("  a accounting building")
enqueue("  h human resources building")
enqueue("  m marketing building")
enqueue("  t technology building")
enqueue("  ◉ hub / crossroad")
enqueue("  ⌂ archive / records vault")
enqueue("")
enqueue("tap again to re-roll the terrain")
}

function shuffle(){
summon(pick(Object.keys(offices)))
}

crt.addEventListener("click",(e)=>{
const b=e.target.closest("button")
if(b){
if(b.hasAttribute("data-office")){summon(b.getAttribute("data-office"));return}
if(b.hasAttribute("data-roll")){shuffle();return}
if(b.hasAttribute("data-clear")){reset();return}
return
}
shuffle()
})

reset()
</script>
</html>